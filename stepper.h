/*
 * stepper.h
 *
 * Created: 2023-11-13 4:38:45 PM
 *  Author: Reilly
 */ 


#ifndef STEPPER_H_
#define STEPPER_H_

#define STEPPER_SPEED 20
#define QUARTER_TURN 50
#define HALF_TURN 100

void home();
void move(int c);
int sort(char list_item);
void print_results();
	

// Global variables for stepper control
volatile char disk_location;	// Black, White, Steel, Aluminum
volatile int homed_flag = 0;	// Set to 1 once homing sensor is tripped and bucket is homed on black
int position = 0;			// stepper position in stepper array(0-3)
int disk_direction = 0;		// 0 = clockwise 1 = counter clockwise
int items_sorted = 0;		// for testing only
int stepper[4] = {0b00011011, 0b00011101, 0b00101101, 0b00101011};	// Stepper positions
/* Slow */
/*int delay_a[50] = {20,19.5,19,18.5,18,17.5,17,16.5,16,15.5,15,14.5,14,13.5,13,12.5,12,11.5,11,10.5,10,9.5,9,8.5,8
					,7.5,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5,19,19.5,20};

int delay_b[100] = {20,19.75,19.5,19.25,19,18.75,18.5,18.25,18,17.75,17.5,17.25,17,16.75,16.5,16.25,16,15.75,15.5,15.25,15,14.75,14.5,14.25,14,
					13.75,13.5,13.25,13,12.75,12.5,12.25,12,11.75,11.5,11.25,11,10.75,10.5,10.25,10,9.75,9.5,9.25,9,8.75,8.5,8.25,8,7.75,
					8,8.25,8.5,8.75,9,9.25,9.5,9.75,10,10.25,10.5,10.75,11,11.25,11.5,11.75,12,12.25,12.5,12.75,13,13.25,13.5,13.75,14,14.25,
					14.5,14.75,15,15.25,15.5,15.75,16,16.25,16.5,16.75,17,17.25,17.5,17.75,18,18.25,18.5,18.75,19,19.25,19.5,19.75,20};*/

/* Fast */
int delay_a[50] = {15,15,13,12.5,12,10,9,8,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
					,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,8,9,10,11,12,12.5,13,15,15};

int delay_b[100] = {15,15,13,12.5,12,10,9,8,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
					,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
					,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
					,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,8,9,10,11,12,12.5,13,15,15};

/* Medium Speed */				
/*int delay_a[50] = {17,16,15,14,12,11,10,9,8,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,8,9,10,11,12,13,14,15,16,17};

int delay_b[100] =  {17,16,15,14,12,11,10,9,8,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
	,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
	,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,8,9,10,11,12,13,14,15,16,17};*/

/* Prototype */
/*int delay_a[50] = {STEPPER_SPEED,STEPPER_SPEED-1,STEPPER_SPEED-2,STEPPER_SPEED-3,STEPPER_SPEED-4,STEPPER_SPEED-5,STEPPER_SPEED-6,STEPPER_SPEED-7,STEPPER_SPEED-8,STEPPER_SPEED-9,STEPPER_SPEED-10,STEPPER_SPEED-11,STEPPER_SPEED-12,6,6,6,6,6,6,6,6,6,6,6,6
,6,6,6,6,6,6,6,6,6,6,6,6,STEPPER_SPEED-12,STEPPER_SPEED-11,STEPPER_SPEED-10,STEPPER_SPEED-9,STEPPER_SPEED-8,STEPPER_SPEED-7,STEPPER_SPEED-6,STEPPER_SPEED-5,STEPPER_SPEED-4,STEPPER_SPEED-3,STEPPER_SPEED-2,STEPPER_SPEED-1,STEPPER_SPEED};

int delay_b[100] =  {STEPPER_SPEED,STEPPER_SPEED-1,STEPPER_SPEED-2,STEPPER_SPEED-3,STEPPER_SPEED-4,STEPPER_SPEED-5,STEPPER_SPEED-6,STEPPER_SPEED-7,STEPPER_SPEED-8,STEPPER_SPEED-9,STEPPER_SPEED-10,STEPPER_SPEED-11,STEPPER_SPEED-12,6,6,6,6,6,6,6,6,6,6,6,6
	,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
	,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6
,6,6,6,6,6,6,6,6,6,6,6,6,STEPPER_SPEED-12,STEPPER_SPEED-11,STEPPER_SPEED-10,STEPPER_SPEED-9,STEPPER_SPEED-8,STEPPER_SPEED-7,STEPPER_SPEED-6,STEPPER_SPEED-5,STEPPER_SPEED-4,STEPPER_SPEED-3,STEPPER_SPEED-2,STEPPER_SPEED-1,STEPPER_SPEED};*/

#endif /* STEPPER_H_ */